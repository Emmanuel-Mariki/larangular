<div class="col-lg-9" id="content">
    <div class="panel panel-default">
        <div class="panel-heading">
            <a [routerLink]="['../../']" class="btn btn-success" *ngIf="id">
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
            <a [routerLink]="['../']" class="btn btn-success" *ngIf="!id">
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
            <span class="title">
                {{ActionTitle}}
            </span>
        </div>
        <div class="panel-body" *ngIf="City">
            <div class="alert alert-success" role="alert" *ngIf="successMessage">
                {{successMessage}}
            </div>
        <form [formGroup]="CityForm"  (ngSubmit)="onSubmit(CityForm.value)" novalidate >
            <div class="row">
                <div class="form-group col-md-12"
                [ngClass]="{'has-error':formErrors.country_id, 
                'has-success':CityForm.controls['country_id'].valid}">
                    <label class="control-label"  for="country_id">Country</label>
                    <select *ngIf="Countries" name="country_id" class="form-control" 
                        formControlName="country_id" #SelectedCountry
                        (change)="BindCountry(SelectedCountry.options['selectedIndex'])"
                        [(ngModel)]="City.country_id">
                        <option *ngFor="let Country of Countries" 
                            value="{{Country.id}}"
                            id="{{Country.name}}">
                            {{Country.name}}
                        </option>
                    </select>
                    <span *ngIf="formErrors.country_id" class="help-block error">
                        {{ formErrors.country_id }}
                    </span>
                </div>

            </div>
            <div class="row hidden">
                    <div class="form-group col-md-12" 
                    [ngClass]="{'has-error':formErrors.country, 
                    'has-success':CityForm.controls['country'].valid}">
                        <label class="control-label"  for="country">Country name</label>
                        <input type="text" [(ngModel)]="selectedCountry" 
                        formControlName="country" disabled
                        class="form-control" id="country">
                        <span *ngIf="formErrors.country" class="help-block error">
                            {{ formErrors.country }}
                        </span>
                    </div>
            </div>
            <div class="row">
                    <div class="form-group col-md-9" 
                    [ngClass]="{'has-error':formErrors.name, 
                    'has-success':CityForm.controls['name'].valid}">
                        <label class="control-label"  for="name">City name</label>
                        <input type="text" [(ngModel)]="City.name" formControlName="name" 
                        class="form-control" id="name" (keyup)="BuildUrl(City.name)">
                        <span *ngIf="formErrors.name" class="help-block error">
                            {{ formErrors.name }}
                        </span>
                    </div>
                    <div class="form-group col-md-3"
                    [ngClass]="{'has-error':formErrors.active, 
                    'has-success':CityForm.controls['active'].valid}">
                        <label class="control-label"  for="active">Active</label>
                        <select name="active" class="form-control" 
                        formControlName="active"
                        [(ngModel)] ="City.active">
                        <option value=""></option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                        </select>
                        <span *ngIf="formErrors.active" class="help-block error">
                            {{ formErrors.active }}
                        </span>
                    </div>
            </div>
            <div class="row">
                    <div class="form-group col-md-9"
                    [ngClass]="{'has-error':formErrors.url, 
                    'has-success':CityForm.controls['url'].valid}">
                        <label class="control-label"  for="title">URL [meta tags]</label>
                        <input type="text" formControlName="url" 
                        [(ngModel)] ="CityURL"
                        class="form-control" id="url"/>
                        <span *ngIf="formErrors.url" class="help-block error">
                            {{ formErrors.url }}
                        </span>
                    </div>
                    <div class="form-group col-md-3"
                    [ngClass]="{'has-error':formErrors.priority, 
                    'has-success':CityForm.controls['priority'].valid}">
                        <label class="control-label"  for="priority">Priority</label>
                        <input type="number" formControlName="priority" 
                        [(ngModel)] ="City.priority"
                        class="form-control" id="priority"/>
                        <span *ngIf="formErrors.priority" class="help-block error">
                            {{ formErrors.priority }}
                        </span>
                    </div>
            </div>
                
            <div class="row">
                <div class="form-group col-md-12"
                [ngClass]="{'has-error':formErrors.keywords, 
                'has-success':CityForm.controls['keywords'].valid}">
                    <label class="control-label"  for="keywords">Keywords [meta tags]</label>
                    <input type="text" formControlName="keywords" 
                    [(ngModel)] ="City.keywords"
                    class="form-control" id="keywords"/>
                    <span *ngIf="formErrors.keywords" class="help-block error">
                        {{ formErrors.keywords }}
                    </span>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-12"
                [ngClass]="{'has-error':formErrors.descriptions, 
                'has-success':CityForm.controls['descriptions'].valid}">
                    <label class="control-label"  for="descriptions">Descriptions [meta tags]</label>
                    <textarea class="form-control" id="descriptions" cols="10"
                    formControlName="descriptions"
                    [(ngModel)] ="City.descriptions"></textarea>
                    <span *ngIf="formErrors.descriptions" class="help-block error">
                        {{ formErrors.descriptions }}
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-12">
                    <input type="submit" value="Save" 
                    [disabled]=!CityForm.valid
                    class="btn btn-lg btn-block btn-primary"/>
                </div>
            </div>
            </form>

        </div>
    </div>
</div>
